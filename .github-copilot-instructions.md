# GitHub Copilot Instructions for Chromium RAG

## When to Use RAG

GitHub Copilot should consult the Chromium RAG system when:

1. **Questions about Chromium internals**
   - Architecture, components, subsystems
   - V8, Blink, Skia, GPU, IPC, Mojo, etc.

2. **Chrome browser features**
   - WebGL, WebRTC, Service Workers
   - Extensions, DevTools, Network stack

3. **Implementation details**
   - How specific features are implemented
   - Code patterns and best practices
   - Bug fixes and optimizations

4. **Security and performance**
   - Security vulnerabilities and fixes
   - Performance optimizations
   - Memory management

## How to Query RAG

### Method 1: VS Code Task (Recommended)
1. Press `Ctrl+Shift+P` (or `Cmd+Shift+P` on Mac)
2. Type "Tasks: Run Task"
3. Select "RAG: Query and Open Results"
4. Enter your query
5. Results open automatically in `copilot_rag_results.md`

### Method 2: Direct Command
```bash
python copilot_rag_interface.py "your question here"
```

### Method 3: Interactive Mode
```bash
python interactive_rag.py
```

## Example Queries

### Good Queries (Specific)
- "How does Chrome handle WebGL context loss?"
- "Memory leak fixes in V8 garbage collector"
- "IPC security improvements in 2023"
- "Skia GPU backend optimizations"

### Poor Queries (Too Broad)
- "Tell me about Chrome"
- "How does a browser work?"
- "What is JavaScript?"

## Query Results Format

Results are saved to `copilot_rag_results.md` with:
- **Top 5 relevant commits** (by default)
- **Commit SHA, author, date**
- **Relevance score** (0.0 - 1.0)
- **Commit message** (preview)
- **Code content** (preview)

## Integration with Copilot Chat

After querying RAG, reference the results:

```
User: @workspace Read copilot_rag_results.md and explain the memory leak patterns

Copilot: [Reads the RAG results and provides detailed explanation based on actual Chromium commits]
```

## Automatic Context Loading

The RAG system is configured to automatically provide context when:
- Questions contain keywords: chromium, chrome, v8, blink, webkit, etc.
- File paths match Chromium source patterns
- Code comments reference Chrome components

## Database Coverage

- **Total Documents**: 152,142+
- **Date Range**: 2022-present (Phase 1-3)
- **Embedding Model**: BGE-large-en-v1.5 (1024-dim)
- **Search Type**: Semantic similarity search

## Performance

- **First Query**: ~8 seconds (model loading)
- **Subsequent Queries**: <1 second (if keeping process alive)
- **Results Quality**: High relevance for specific technical queries

## Tips for Best Results

1. **Be Specific**: "V8 TurboFan optimization for array operations" vs "V8 optimization"
2. **Use Technical Terms**: Component names, API names, feature names
3. **Include Context**: "In Chrome 100+", "Since 2023", etc.
4. **Follow Up**: Ask Copilot to explain the RAG results in detail

## Troubleshooting

**Slow Queries?**
- First query loads model (~7s), subsequent queries are faster
- Use interactive mode for multiple queries

**No Results?**
- Try different keywords
- Broaden or narrow your query
- Check database coverage dates

**Results Not Relevant?**
- Be more specific in your query
- Use exact component/API names
- Try different phrasing
